;; https://figwheel.org/docs/testing.html
^{:auto-testing true
  :watch-dirs   ["src/clojure" "test"]}
{:main          parcera.core
 :npm-deps      {"antlr4" "^4.7.2"}
 :install-deps  true
 :infer-externs true
 ;:target :nodejs
 :foreign-libs  [{:file        "src/javascript/clojure.reader.bundle.js"
                  :provides    ["antlr.clojure.reader"]
                  :module-type :commonjs}]}
; NOTE: I feel this more as a hack than as an actual solution.
; Ideally I should just let ClojureScript import the lexer and parser
; from a browser perspective. However it seems that the Closure compiler
; doesnt like conditional imports so it throws saying that 'fs' is not
; defined which is clearly a node.js dependency.
; On the other hand, if I pass the module as node.js target then the Closure
; compiler corrupts the source code which makes it unusable :(

;{:file        "src/javascript/parcera/antlr/ClojureLexer.js"
; :provides    ["antlr.clojure.lexer"]
; :module-type :commonjs}
;{:file        "src/javascript/parcera/antlr/Clojure.Parser.js"
; :provides    ["antlr.clojure.parser"]
; :module-type :commonjs}]}
